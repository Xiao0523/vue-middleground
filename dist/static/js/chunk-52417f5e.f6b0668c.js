(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52417f5e"],{2922:function(t,e,a){"use strict";var r=a("474e"),s=a.n(r);s.a},"367d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product_new"},[a("h3",{staticClass:"title"},[t._v("产品详情")]),t._v(" "),a("span",{staticClass:"note"},[t._v("*请确保以下内容文字都是英文")]),t._v(" "),a("el-form",{ref:"ruleForm",staticClass:"ruleForm",attrs:{model:t.ruleForm,"label-position":"right","label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"产品类目：",prop:"category"}},[a("el-select",{staticStyle:{width:"500px"},attrs:{clearable:"",placeholder:"请选择产品类目"},model:{value:t.ruleForm.categoryUuid,callback:function(e){t.$set(t.ruleForm,"categoryUuid",e)},expression:"ruleForm.categoryUuid"}},t._l(t.productCategoryList,(function(t){return a("el-option",{key:t.uuid,attrs:{label:t.nameCn,value:t.uuid}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品名称:"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:t.ruleForm.uuid,callback:function(e){t.$set(t.ruleForm,"uuid",e)},expression:"ruleForm.uuid"}}),t._v(" "),a("el-input",{staticStyle:{width:"500px"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品图片："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":t.handleVideoSuccess,"before-upload":t.beforeAvatarUpload,"on-preview":t.handlePictureCardPreview}},[t.ruleForm.pic?a("img",{staticClass:"avatar",attrs:{src:t.ruleForm.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("p",{staticClass:"upload-tips"},[t._v("只能上传jpg/png文件")])],1),t._v(" "),a("el-form-item",{attrs:{label:"标签："}},[a("el-select",{staticStyle:{width:"500px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.ruleForm.tags,callback:function(e){t.$set(t.ruleForm,"tags",e)},expression:"ruleForm.tags"}},t._l(t.TagsList,(function(t){return a("el-option",{key:t.uuid,attrs:{label:t.nameCn,value:t.uuid}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品描述："}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:3,placeholder:"请输入内容"},model:{value:t.ruleForm.description,callback:function(e){t.$set(t.ruleForm,"description",e)},expression:"ruleForm.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"附件："}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{width:"500px"},attrs:{"on-success":t.handleSuccess,"file-list":t.ruleForm.fileList,action:t.Upload_File,"on-remove":t.handleRemove,name:"multipartFile",limit:1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("启用")]),t._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[t._v("禁用")])],1),t._v(" "),a("el-row",[a("el-form-item",[a("el-button",{staticStyle:{left:"200px"},attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("ruleForm")}}},[t._v("提交")]),t._v(" "),a("el-button",{staticStyle:{left:"100px"},attrs:{type:"info"},on:{click:function(e){return t.cancel("ruleForm")}}},[t._v("返回")])],1)],1)],1)],1)},s=[],i=(a("7f7f"),a("28a5"),a("ac6a"),a("c4c8")),n=a("99b1"),o={components:{},data:function(){return{productCategoryList:[],ruleForm:{uuid:"",categoryUuid:"",name:"",pic:"",tags:[],attachement:"",status:"1",fileList:[]},uploadUrl:n["b"],Upload_File:n["a"],TagsList:[],query:{}}},computed:{},watch:{},created:function(){this.getCategory(),this.getTags(),this.query=this.$route.query,this.inintData()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{inintData:function(){var t=this;Object(i["c"])(this.query.id).then((function(e){if(e.data.code)return e.data.message&&t.$warn(e.data.message);var a=e.data.data,r=a.tags,s=[];r.forEach((function(t){s.push(t.tagUuid)})),a.tags=s;var i={},n=[];i={name:a.attachement.split("/").pop(),url:a.attachement},n.push(i),a.fileList=n,a.status=String(a.status),t.ruleForm=a}))},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("请上传JPG/PNG格式的图片"),e},handleVideoSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);this.$success("上传成功！！！"),this.ruleForm.pic=t.data},handleVideoRemove:function(){this.ruleForm.pic=""},handlePictureCardPreview:function(t){this.ruleForm.pic=t.url},getCategory:function(){var t=this;Object(i["d"])().then((function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);t.productCategoryList=e.data.data})).catch((function(t){}))},getTags:function(){var t=this;Object(i["f"])().then((function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);console.log(e.data.data),t.TagsList=e.data.data}))},handlePreview:function(t){console.log(t)},handleRemove:function(t,e){if("success"!==t.status)return this.$warn("删除失败");this.$success("删除成功！！！"),this.ruleForm.attachement="",this.fileLst=[]},handleSuccess:function(t,e){if(t.code)return t.message&&this.$warn(t.message);this.$success("上传成功！！！"),this.ruleForm.attachement=t.data;var a={name:e.name,url:t.data};this.fileList=[],this.fileList.push(a)},cancel:function(t){this.$refs[t].resetFields(),this.$router.go(-1)},onSubmit:function(t){var e=this,a=this.ruleForm.tags,r=[];a.forEach((function(t){return r.push({tagUuid:t})})),this.ruleForm.tags=r,Object(i["b"])(this.ruleForm).then((function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);e.$success(t.data.message),e.$router.go(-1)}))}}},u=o,l=(a("2922"),a("65df"),a("2877")),c=Object(l["a"])(u,r,s,!1,null,"26776076",null);e["default"]=c.exports},"474e":function(t,e,a){},"65df":function(t,e,a){"use strict";var r=a("fc43"),s=a.n(r);s.a},"99b1":function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n}));var r="https://upload.my51share.com",s=r+"/pic",i=r+"/video",n=r+"/file"},c4c8:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return i})),a.d(e,"f",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return l}));var r=a("f96b");function s(){return r["a"].get("/boss/supplier/categories")}function i(t){return r["a"].post("/boss/supplier/products",t)}function n(){return r["a"].get("/boss/supplier/tags")}function o(t){return r["a"].post("/boss/supplier/product",t)}function u(t){return r["a"].get("/boss/supplier/product/"+t)}function l(t){return r["a"].del2("/boss/supplier/product/"+t)}},fc43:function(t,e,a){}}]);