(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fdccb3de"],{"1ce7":function(t,e,a){"use strict";var r=a("416e"),n=a.n(r);n.a},"21af":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product"},[a("el-row",[a("el-form",{ref:"ruleForm",attrs:{inline:!0,model:t.ruleForm}},[a("el-form-item",[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入产品名称",clearable:""},model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title","string"===typeof e?e.trim():e)},expression:"ruleForm.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品类目：",prop:"category"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择产品类目"},on:{change:t.changeTheme},model:{value:t.ruleForm.productCategoryId,callback:function(e){t.$set(t.ruleForm,"productCategoryId",e)},expression:"ruleForm.productCategoryId"}},t._l(t.productCategoryList,(function(t){return a("el-option",{key:t.uuid,attrs:{label:t.nameCn,value:t.uuid}})})),1)],1),t._v(" "),a("el-form-item",[a("el-radio-group",{on:{change:t.changeTheme},model:{value:t.ruleForm.status,callback:function(e){t.$set(t.ruleForm,"status",e)},expression:"ruleForm.status"}},[a("el-radio-button",{attrs:{label:"-1"}},[t._v("全部")]),t._v(" "),a("el-radio-button",{attrs:{label:"0"}},[t._v("禁用")]),t._v(" "),a("el-radio-button",{attrs:{label:"1"}},[t._v(" 启用")])],1)],1),t._v(" "),a("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("查找")]),t._v(" "),a("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:t.newProduct}},[t._v("新增产品")])],1)],1),t._v(" "),a("el-table",{staticClass:"table-box",attrs:{data:t.productList,"header-cell-style":t.tabHeader,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"产品名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"产品图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.pic}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"categoryName",label:"产品类目"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"description",label:"产品描述"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"附件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-upload",{staticClass:"upload-demo",attrs:{action:t.Upload_File,"file-list":e.row.fileList,limit:1,disabled:!0}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,(function(e){return a("el-tag",{key:e.tagUuid,attrs:{type:"success",effect:"plain"}},[t._v("\n          "+t._s(e.tagName)+"\n        ")])}))}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-tag",{attrs:{effect:"dark",type:"success"}},[t._v("启用")]):t._e(),t._v(" "),0===e.row.status?a("el-tag",{attrs:{effect:"dark",type:"danger"}},[t._v("禁用")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),0===e.row.status?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.changeStatus(e.row.uuid,1)}}},[t._v("开启")]):t._e(),t._v(" "),1===e.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.changeStatus(e.row.uuid,0)}}},[t._v("禁用")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return t.del(e.row.uuid)}}},[t._v(" 删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"pageNumBox"},[a("pageNum",{attrs:{"current-page":t.pageNo,"page-size":t.pageSize,total:t.totalNum},on:{sizeChange:t.sizeChangeFn,currentChange:t.currentPageChange}})],1)],1)},n=[],o=(a("28a5"),a("ac6a"),a("c4c8")),i=a("99b1"),s=a("48c3"),u={components:{pageNum:s["a"]},data:function(){return{totalNum:null,pageNo:1,pageSize:10,tabHeader:{"background-color":"#F4F4F4",color:"#666666","border-top":"1px solid #BBBBBB","border-bottom":"1px solid #BBBBBB","font-size":"16px","text-align":"center"},ruleForm:{title:"",productCategoryId:""},productCategoryList:[],productList:[],Upload_File:i["a"]}},created:function(){this.getCategory(),this.fetchCategory()},methods:{getCategory:function(){var t=this;Object(o["d"])().then((function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);t.productCategoryList=e.data.data})).catch((function(t){}))},search:function(){this.pageNo=1,this.fetchCategory()},changeTheme:function(){this.pageNo=1,this.fetchCategory()},fetchCategory:function(){var t=this,e="-1"===this.ruleForm.status?"":this.ruleForm.status,a={productCategoryId:this.ruleForm.productCategoryId,title:this.ruleForm.title,pageNum:this.pageNo,pageSize:this.pageSize,status:e};Object(o["e"])(a).then((function(e){if(e.data.code)return e.data.message&&t.$wran(e.data.message);var a=e.data.data.records,r=[];a.forEach((function(t){var e={},a=[];e={name:t.attachement.split("/").pop(),url:t.attachement},a.push(e),t.fileList=a,r.push(t)})),t.productList=r,t.totalNum=e.data.data.total}))},sizeChangeFn:function(t){this.pageSize=t,this.fetchCategory()},currentPageChange:function(t){this.pageNo=t,this.fetchCategory()},newProduct:function(){this.$router.push({path:"/productManager/productAdd"})},edit:function(t){this.$router.push({path:"/productManager/productedit",query:{id:t.uuid}})},changeStatus:function(t,e){var a=this;Object(o["c"])(t).then((function(t){if(t.data.code)return t.data.message&&a.$wran(t.data.message);var r=t.data.data;r.status=e,Object(o["b"])(r).then((function(t){if(t.data.code)return t.data.message&&a.$wran(t.data.message);a.$success(t.data.message),a.pageNo=1,a.fetchCategory()}))}))},del:function(t){var e=this;Object(o["a"])(t).then((function(t){if(t.data.code)return t.data.message&&e.$wran(t.data.message);e.$success(t.data.message),e.pageNo=1,e.fetchCategory()}))}}},c=u,l=(a("6aca"),a("2877")),d=Object(l["a"])(c,r,n,!1,null,"00e860c2",null);e["default"]=d.exports},"416e":function(t,e,a){},"48c3":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pageBox"},[t.isShow?a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[5,10,50,100,200,300,400,500],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)},n=[];a("c5f6");function o(t,e){"string"===typeof e?sessionStorage.setItem(t,e):sessionStorage.setItem(t,JSON.stringify(e))}function i(t){var e=sessionStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(a){return e}}var s={components:{},props:{currentPage:{type:Number},pageSizes:{type:Array,default:function(){return[]}},pageSize:{type:Number},total:{type:Number}},data:function(){return{isShow:!1}},watch:{total:function(t){console.log("total",t),0!=t&&(this.isShow=!0)}},mounted:function(){},updated:function(){console.log("分页组件",this.currentPage),console.log("分页组件",this.pageSize)},created:function(){},methods:{handleSizeChange:function(t){o("currentSize",t);var e=i("currentSize");this.$emit("sizeChange",e)},handleCurrentChange:function(t){o("currentPage",t);var e=i("currentPage");this.$emit("currentChange",e)}}},u=s,c=(a("1ce7"),a("2877")),l=Object(c["a"])(u,r,n,!1,null,"75f86e23",null);e["a"]=l.exports},"6aca":function(t,e,a){"use strict";var r=a("e06c"),n=a.n(r);n.a},"99b1":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var r="https://upload.my51share.com",n=r+"/pic",o=r+"/video",i=r+"/file"},aa77:function(t,e,a){var r=a("5ca1"),n=a("be13"),o=a("79e5"),i=a("fdef"),s="["+i+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(t,e,a){var n={},s=o((function(){return!!i[t]()||u[t]()!=u})),c=n[t]=s?e(p):i[t];a&&(n[a]=c),r(r.P+r.F*s,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},c4c8:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return c}));var r=a("f96b");function n(){return r["a"].get("/boss/supplier/categories")}function o(t){return r["a"].post("/boss/supplier/products",t)}function i(){return r["a"].get("/boss/supplier/tags")}function s(t){return r["a"].post("/boss/supplier/product",t)}function u(t){return r["a"].get("/boss/supplier/product/"+t)}function c(t){return r["a"].del2("/boss/supplier/product/"+t)}},c5f6:function(t,e,a){"use strict";var r=a("7726"),n=a("69a8"),o=a("2d95"),i=a("5dbc"),s=a("6a99"),u=a("79e5"),c=a("9093").f,l=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",g=r[f],h=g,m=g.prototype,b=o(a("2aeb")(m))==f,v="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var a,r,n,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var i,u=e.slice(2),c=0,l=u.length;c<l;c++)if(i=u.charCodeAt(c),i<48||i>n)return NaN;return parseInt(u,r)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof g&&(b?u((function(){m.valueOf.call(a)})):o(a)!=f)?i(new h(y(e)),a,g):y(e)};for(var _,C=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;C.length>N;N++)n(h,_=C[N])&&!n(g,_)&&d(g,_,l(h,_));g.prototype=m,m.constructor=g,a("2aba")(r,f,g)}},e06c:function(t,e,a){},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);