(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d47e84a"],{4917:function(e,t,o){"use strict";var a=o("cb7c"),r=o("9def"),s=o("0390"),i=o("5f1b");o("214f")("match",1,(function(e,t,o,l){return[function(o){var a=e(this),r=void 0==o?void 0:o[t];return void 0!==r?r.call(o,a):new RegExp(o)[t](String(a))},function(e){var t=l(o,e,this);if(t.done)return t.value;var n=a(e),c=String(this);if(!n.global)return i(n,c);var p=n.unicode;n.lastIndex=0;var d,m=[],u=0;while(null!==(d=i(n,c))){var f=String(d[0]);m[u]=f,""===f&&(n.lastIndex=s(c,r(n.lastIndex),p)),u++}return 0===u?null:m}]}))},"99b1":function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return i}));var a="https://upload.my51share.com",r=a+"/pic",s=a+"/video",i=a+"/file"},cbc9:function(e,t,o){},d61c:function(e,t,o){"use strict";var a=o("cbc9"),r=o.n(a);r.a},f516:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"material"},[o("h3",{staticClass:"title"},[e._v("基本资料")]),e._v(" "),o("span",{staticClass:"note"},[e._v("*请确保以下内容文字都是英文")]),e._v(" "),o("el-form",{ref:"form",staticClass:"search-box",attrs:{inline:!0,model:e.form,"label-width":"150px",label:"left",rules:e.rules}},[o("el-form-item",{staticClass:"search-item",attrs:{label:"Company name",prop:"companyName"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName","string"===typeof t?t.trim():t)},expression:"form.companyName"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Company profile",prop:"simpleDescription"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.simpleDescription,callback:function(t){e.$set(e.form,"simpleDescription","string"===typeof t?t.trim():t)},expression:"form.simpleDescription"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Jump website",prop:"webUrl"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.webUrl,callback:function(t){e.$set(e.form,"webUrl","string"===typeof t?t.trim():t)},expression:"form.webUrl"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"The name",prop:"realName"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName","string"===typeof t?t.trim():t)},expression:"form.realName"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Personal motto",prop:"motto"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.motto,callback:function(t){e.$set(e.form,"motto","string"===typeof t?t.trim():t)},expression:"form.motto"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Mobile phone no.",prop:"mobilePhone"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.mobilePhone,callback:function(t){e.$set(e.form,"mobilePhone","string"===typeof t?t.trim():t)},expression:"form.mobilePhone"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Email",prop:"email"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Twitter",prop:"twitter"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.twitter,callback:function(t){e.$set(e.form,"twitter","string"===typeof t?t.trim():t)},expression:"form.twitter"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Facebook",prop:"facebook"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.facebook,callback:function(t){e.$set(e.form,"facebook","string"===typeof t?t.trim():t)},expression:"form.facebook"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"LinkedIn",prop:"linkedIn"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.linkedIn,callback:function(t){e.$set(e.form,"linkedIn","string"===typeof t?t.trim():t)},expression:"form.linkedIn"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"whatsapp",prop:"whatsapp"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"Please enter the"},model:{value:e.form.whatsapp,callback:function(t){e.$set(e.form,"whatsapp","string"===typeof t?t.trim():t)},expression:"form.whatsapp"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"上传照片"}},[o("el-upload",{staticClass:"uploader logo",attrs:{action:e.uploadUrl,name:"multipartFile","show-file-list":!1,"on-success":e.handleVideoSuccess,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview}},[e.form.businessPic?o("img",{staticClass:"logo",attrs:{src:e.form.businessPic}}):o("i",{staticClass:"el-icon-picture uploader-icon"})]),e._v(" "),o("p",{staticClass:"upload-tips"},[e._v("只能上传jpg/png文件，建议尺寸为580x580px。")]),e._v(" "),o("input",{attrs:{type:"hidden"}})],1),e._v(" "),o("el-form-item",{staticClass:"search-item",attrs:{label:"Promotional video",prop:"facebook"}},[o("div",{staticClass:"upload-box"},[e._l(e.form.videos,(function(t){return o("div",{key:t.videoUrl,staticClass:"video-box"},[o("span",{staticClass:"icon-close",on:{click:function(o){return e.closeVideo(t.videoUrl)}}}),e._v(" "),o("video",{staticClass:"video-border",attrs:{controls:"",autoplay:"",poster:t.videoCover}},[o("source",{attrs:{src:t.videoUrl,type:"video/mp4"}})])])})),e._v(" "),o("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"video/*"},on:{change:e.fileChange}}),e._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.$refs.input.click()}}},[e._v("\n          上传视频\n        ")]),e._v(" "),o("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.percentage,expression:"percentage"}],staticStyle:{width:"400px"},attrs:{percentage:e.percentage,"stroke-width":20,color:e.customColors,"text-inside":!0}})],2)]),e._v(" "),o("el-row",[o("el-col",{attrs:{span:9}},[o("el-button",{staticClass:"submit",on:{click:e.submitInformation}},[e._v("提交")])],1)],1)],1)],1)},r=[],s=(o("7f7f"),o("4917"),o("bc3a")),i=o.n(s),l=o("99b1"),n=o("f96b");function c(){return n["a"].get("/boss/supplier/web")}function p(e){return n["a"].patch("/boss/supplier/web",e)}var d={components:{},data:function(){return{form:{companyName:"",simpleDescription:"",webUrl:"",realName:"",motto:"",mobilePhone:"",email:"",twitter:"",facebook:"",linkedIn:"",whatsapp:"",videos:[],videoInfo:{videoCoverUrl:"",videoUrl:"",videoId:""},businessPic:""},rules:{companyName:[{required:!0,message:"Please enter the company name",trigger:"blur"}],simpleDescription:[{required:!0,message:"Please enter company profile",trigger:"blur"}]},videoUrl:l["c"],uploadUrl:l["b"],uploadFile:null,percentage:0,uploader:null,disableSubmit:!0,customColors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}],securityToken:"",accessKeyId:"",accessKeySecret:"",dialogImageUrl:"",dialogVisible:!1}},computed:{},watch:{},created:function(){this.getWebsite()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||this.$message.error("请上传JPG/PNG格式的图片"),t},handleVideoSuccess:function(e,t){if(e.code)return e.message&&this.$warn(e.message);this.$success("上传成功！！！"),this.form.businessPic=e.data},handleVideoRemove:function(){this.videoLoading=!1,this.form.businessPic="",this.form.businessPic=""},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},fileChange:function(){var e=this;return!!event.target.files[0]&&(event.target.files[0].type.match("video.*")?(this.uploadFile=event.target.files[0],this.percentage=0,void(this.uploadFile.size<=157286400?this.getAuth((function(){e.getUploder();var t='{"Vod":{"StorageLocation":"","Title":"'+e.uploadFile.name+'","Description":"默认描述信息暂无","CateId":"19","Tags":"测试视频"}}';e.uploader.addFile(e.uploadFile,"","","",t),e.uploader.startUpload()})):this.$message.error("上传的文件大小超过150M，请重新上传"))):(this.$message.error("请选择视频文件"),!1))},getUploder:function(){var e=this;e.uploader=new AliyunUpload.Vod({userId:"1402947514567452",partSize:1048576,parallel:5,retryCount:3,retryDuration:2,enableUploadProgress:!0,onUploadFailed:function(t,o,a){e.$message.error("文件上传失败：".concat(a))},onUploadSucceed:function(t){console.log(t);var o="https://video.my51share.com/".concat(t.object),a={videoUrl:o,videoId:t.videoId,videoCover:""};e.form.videos.push(a),console.log(e.form.videos),e.$message.success("文件上传成功")},onUploadProgress:function(t,o,a){e.percentage=+(100*a).toFixed(0)},onUploadTokenExpired:function(e){console.log("onUploadTokenExpired STS临时账号过期了")},onUploadCanceled:function(e){console.log("onUploadCanceled:file:".concat(e.file.name))},onUploadstarted:function(t){var o=e.accessKeyId,a=e.accessKeySecret,r=e.securityToken;e.uploader.setSTSToken(t,o,a,r)},onUploadEnd:function(e){console.log("onUploadEnd: uploaded all the files")}})},getAuth:function(e){var t=this,o=JSON.parse(localStorage.getItem("storeId"))||"023";i.a.get("https://dev.my51share.com/VodStsForApp/"+o).then((function(o){t.securityToken=o.data.credentials.securityToken,t.accessKeyId=o.data.credentials.accessKeyId,t.accessKeySecret=o.data.credentials.accessKeySecret,e()}))},getWebsite:function(){var e=this;c().then((function(t){if(t.code)return t.message&&e.$warn(t.message);e.form=t.data.data}))},submitInformation:function(){var e=this,t=this.form;p(t).then((function(t){if(t.data.code)return t.data.message&&e.$warn(t.data.message);e.$success(t.data.message)}))},closeVideo:function(e){var t=this.form.videos,o=t.filter((function(t){return t.videoUrl!==e}));this.form.videos=o}}},m=d,u=(o("d61c"),o("2877")),f=Object(u["a"])(m,a,r,!1,null,"897c973e",null);t["default"]=f.exports}}]);